{% extends "base.html" %}
{% block title %}Calculadora de Triângulo Retângulo{% endblock %}
{% block content %}
    <h1 class="text-center mb-4 text-warning">Calculadora de Triângulo Retângulo</h1>
    
    <form method="POST" class="bg-secondary p-4 rounded shadow-sm">

        <div class="mb-3">
            <label for="ladoA" class="form-label text-light">Lado A (Cateto Adjacente):</label>
            <input type="number" class="form-control" id="ladoA" name="ladoA" step="any">

            <label for="ladoB" class="form-label text-light">Lado B (Cateto Oposto):</label>
            <input type="number" class="form-control" id="ladoB" name="ladoB" step="any">

            <label for="ladoC" class="form-label text-light">Lado C (Hipotenusa):</label>
            <input type="number" class="form-control" id="ladoC" name="ladoC" step="any">
            
            <label for="angulo" class="form-label text-light">Ângulo:</label>
            <input type="number" class="form-control" id="angulo" name="angulo" max="89" step="any">

            <label for="precisao" class="form-label text-light">Precisão:</label>

            <select class="form-select" id="precisao" name="precisao" onchange="mostrarInput()">
                <option value="none">Sem arredondamento</option>
                <option value="1">1</option>
                <option value="0.1">0.1</option>
                <option value="0.01">0.01</option>
                <option value="0.001">0.001</option>
                <option value="0.0001">0.0001</option>
                <option value="0.00001">0.00001</option>         
                <option value="custom">Personalizado</option>           
                <input id="precisaoCustom" name="precisaoCustom" type="number" max=8 class="form-control mt-2" placeholder="Digite quantas casas decimais (máximo 8)" style="display:none; margin-top:8px;">
            </select>
        </div>
            <button type="submit" class="btn btn-primary w-100">Calcular</button>
    </form>

        {% if request.method == 'POST' %}
            {% if error %}
                <div class="alert alert-danger mt-4" role="alert">
                    {{ error }}
                </div>
            {% else %}
                <div class="alert alert-success mt-4" role="alert">
                    <h4 class="alert-heading">Resultados:</h4>
                    <p><strong>Cateto Adjacente:</strong> 
                        {{ catetoAdjascente }}
                        {% if catetoAdjascenteRaizSimbolica %} | {{ catetoAdjascenteRaizSimbolica }}{% endif %}
                    </p>

                    <p><strong>Cateto Oposto:</strong> 
                        {{ catetoOposto }}
                        {% if catetoOpostoRaizSimbolica %} | {{ catetoOpostoRaizSimbolica }}{% endif %}
                    </p>

                    <p><strong>Hipotenusa:</strong> 
                        {{ hipotenusa }}
                        {% if hipotenusaRaizSimbolica %} | {{ hipotenusaRaizSimbolica }}{% endif %}
                    </p>

                    <p><strong>Ângulo:</strong> 
                        {{ angulo }}°
                    </p>
                </div>
            {% endif %}
        {% endif %}
        <script>
        function mostrarInput() {
            const select = document.getElementById("precisao");      // pega o <select>
            const input = document.getElementById("precisaoCustom"); 

            if (select.value === "custom") { // se a opção escolhida for "Personalizada"
                input.style.display = "inline-block"; 
                input.focus(); // já coloca o cursor dentro do campo
            } else {
                input.style.display = "none"; 
                input.value = ""; 
            }
        }
    </script>
{% endblock %}
